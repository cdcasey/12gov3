<nav id="menu">
	<ul>
		<li>
			<a href="/">Episodes</a>
			<ul>
				<li>Series and Minisodes</li>
				<li>Transcripts</li>
			</ul>
		</li>
		<li>
			About
			<ul>
				<li>Press Kit</li>
				<li>Collaborations</li>
				<li>Contact</li>
			</ul>
		</li>
		<li>Support</li>
	</ul>
</nav>

<style>
	@reference '@/styles/global.css';
	nav {
		@apply bg-otgowhite/90 fixed top-0 left-0 h-full -translate-x-full px-4 pt-24 transition-all duration-300;
	}
	.open {
		@apply translate-x-0;
	}
	li > ul > li {
		@apply ml-4;
	}
</style>

<script>
	import { menuIsOpen } from '@/stores/menuStore';
	const menu = document.getElementById('menu');
	// Listen to changes in the store, and show/hide the dialog accordingly
	menuIsOpen.subscribe((open) => {
		if (open) {
			menu?.classList.add('open');
		} else {
			menu?.classList.remove('open');
		}
	});

	function closeMenu() {
		const navCheckbox = document.getElementById('nav-toggle') as HTMLInputElement | null;
		if (navCheckbox?.checked) navCheckbox.click();
		menuIsOpen.set(false);
	}

	menu?.addEventListener('click', closeMenu);
</script>
