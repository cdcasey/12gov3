---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'a'> {
	tagCount: number;
}

const { href, tagCount, ...attrs } = Astro.props;

// const scaler = base => Math.pow(base, 1 / 1.3);
// const scaler = (base) => Math.log(base) + 1;
// const fontScaler = `${Math.log(Math.sqrt(tagCount)) + 0.2}rem`;
// const fontScaler = `${Math.log(tagCount) / 2}rem`;
// const MIN_SIZE = 0.8;
// const MAX_SIZE = 2.5;
// Assume maxCount is calculated elsewhere, e.g. 54
// const fontScaler = `${MIN_SIZE + (Math.log(tagCount) / Math.log(tagCount)) * (MAX_SIZE - MIN_SIZE)}rem`;
const fontScaler = `${0.8 + Math.log(tagCount) * 0.35}rem`;
---

<a href={href}>
	<slot />
</a>

<style define:vars={{ fontScaler }}>
	a {
		border-radius: var(--radius-sm); /* rounded */
		padding: 0 0.1em; /* em so padding scales w/ fontSacler */
		font-size: var(--fontScaler);
		line-height: 1; /* leading-none */
		color: var(--otgowhite);
		display: inline-block;
	}

	a:hover {
		background-color: var(--otgogreen-light);
		color: var(--otgogreen-dark);
	}
</style>
